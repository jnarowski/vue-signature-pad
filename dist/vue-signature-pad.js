(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("signature_pad"),require("merge-images")):"function"==typeof define&&define.amd?define(["signature_pad","merge-images"],b):(a=a||self,a["vue-signature-pad"]=b(a.SignaturePad,a.mergeImages))})(this,function(a,b){'use strict';a=a&&a.hasOwnProperty("default")?a["default"]:a,b=b&&b.hasOwnProperty("default")?b["default"]:b;var c=["image/png","image/jpeg","image/svg+xml"],d=function(a){return c.includes(a)},e={dotSize:3/2,minWidth:.5,maxWidth:2.5,throttle:16,minDistance:5,backgroundColor:"rgba(0,0,0,0)",penColor:"black",velocityFilterWeight:.7,onBegin:function(){},onEnd:function(){}},f=function(a){return JSON.parse(JSON.stringify(a))},g={src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",x:0,y:0},h={name:"VueSignaturePad",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},customStyle:{type:Object},saveType:{type:String,default:"image/png"},options:{type:Object,default:function(){return{}}},images:{type:Array,default:function(){return[]}}},data:function(){return{signaturePad:{},cacheImages:[],signatureData:g,onResizeHandler:null}},mounted:function(){var b=this,c=b.options,d=this.$refs.signaturePadCanvas,f=new a(d,Object.assign({},e,c));this.signaturePad=f,this.onResizeHandler=this.resizeCanvas.bind(this),window.addEventListener("resize",this.onResizeHandler,!1),this.resizeCanvas()},beforeDestroy:function(){this.onResizeHandler&&window.removeEventListener("resize",this.onResizeHandler,!1)},methods:{resizeCanvas:function(){var a=Math.max,b=this.$refs.signaturePadCanvas,c=this.signaturePad.toData(),d=a(window.devicePixelRatio||1,1);b.width=b.offsetWidth*d,b.height=b.offsetHeight*d,b.getContext("2d").scale(d,d),this.signaturePad.clear(),this.signatureData=g,this.signaturePad.fromData(c)},saveSignature:function(){var a=this,b=a.signaturePad,c=a.saveType,e={isEmpty:!1,data:void 0};if(!d(c))throw new Error("Image type is incorrect!");return b.isEmpty()?Object.assign({},e,{isEmpty:!0}):(this.signatureData=b.toDataURL(c),Object.assign({},e,{data:this.signatureData}))},undoSignature:function(){var a=this,b=a.signaturePad,c=b.toData();if(c)return b.fromData(c.slice(0,-1))},mergeImageAndSignature:function(a){return this.signatureData=a,b(this.images.concat(this.cacheImages,[this.signatureData]))},addImages:function(a){return void 0===a&&(a=[]),this.cacheImages=this.cacheImages.concat(a),b(this.images.concat(this.cacheImages,[this.signatureData]))},fromDataURL:function(a,b,c){return void 0===b&&(b={}),this.signaturePad.fromDataURL(a,b,c)},fromData:function(a){return this.signaturePad.fromData(a)},toData:function(){return this.signaturePad.toData()},lockSignaturePad:function(){return this.signaturePad.off()},openSignaturePad:function(){return this.signaturePad.on()},isEmpty:function(){return this.signaturePad.isEmpty()},getPropImagesAndCacheImages:function(){return this.propsImagesAndCustomImages},clearCacheImages:function(){return this.cacheImages=[],this.cacheImages},clearSignature:function(){return this.signaturePad.clear()}},computed:{propsImagesAndCustomImages:function(){var a=f(this.images),b=f(this.cacheImages);return a.concat(b)}},watch:{options:function(a){var b=this;Object.keys(a).forEach(function(c){b.signaturePad[c]&&(b.signaturePad[c]=a[c])})}},render:function(a){var b=this,c=b.width,d=b.height,e=b.customStyle;return a("div",{style:Object.assign({},{width:c,height:d},e)},[a("canvas",{style:{width:"100%",height:"100%"},ref:"signaturePadCanvas"})])}};return h.install=function(a){return a.component(h.name,h)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(h),h});
